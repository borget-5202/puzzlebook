    :root{
      --bg:#f7f7f8; --panel:#fff; --brand:#0ea5e9; --text:#333; --muted:#666;
      --success:#28a745; --error:#dc3545; --warning:#ffc107; --info:#17a2b8;
      --board-max: 640px;
      --card-h: 220px;
      --card-w: calc(var(--board-max)/4 - 16px);
      --op-btn-h: 56px; /* Larger operator buttons */
    }
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:var(--bg);color:var(--text)}
    .wrap{max-width:980px;margin:0 auto;padding:20px}

    /* Header */
    .game-header{text-align:center;margin-bottom:16px}
    .game-title{font-size:2rem;margin:0;color:var(--brand)}
    .game-subtitle{color:var(--muted);margin:6px 0 0}

    .panel{background:var(--panel);border-radius:12px;padding:16px;box-shadow:0 2px 10px rgba(0,0,0,.08)}
    .topline{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:10px}
    #question{font-weight:600}
    #timer{margin-left:auto;font-variant-numeric:tabular-nums;background:#eef;padding:4px 8px;border-radius:8px}
    .right-tools{display:flex;align-items:center;gap:10px}
    details.settings summary{cursor:pointer;color:#555}
    details.settings[open]{background:#fff;border-radius:8px;padding:8px 10px;box-shadow:0 2px 8px rgba(0,0,0,.06)}
    .settings-row{display:flex;gap:12px;align-items:center;margin-top:6px}
    .link{color:#0a58ca;text-decoration:underline;cursor:pointer}

    .board{max-width:var(--board-max);margin:0 auto;width:100%}

    /* Blinking animation for error messages */
    @keyframes blink {
        0% { opacity: 1; }
        50% { opacity: 0.3; }
        100% { opacity: 1; }
    }

    .status-error {
        animation: blink 0.5s ease-in-out 3; /* Blink 3 times over 1.5 seconds */
    }

    /* Cards grid */
    .cards{
      display:grid;
      grid-template-columns:repeat(4, 1fr);
      gap:12px;
      margin:12px 0;
      width:100%;
    }
    .card{
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:12px;
      background:#fff;
      box-shadow:0 4px 8px rgba(0,0,0,.1);
      height:var(--card-h);
      width:var(--card-w);
      margin:0 auto;
    }
    .card img{
      display:block;
      height:100%;
      width:100%;
      border-radius:12px;
      cursor:pointer;
      object-fit:contain;
    }

    /* Operator panel - more visible */
    .op-panel {
      background: var(--panel);
      border-radius: 12px;
      padding: 14px 8px;
      margin: 16px 0 8px;
      width: 100%;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .ops-wrap {
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .ops-wrap button {
      min-width: var(--op-btn-h);
      height: var(--op-btn-h);
      padding: 0 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 800;
      font-size: 24px; /* Much larger font */
      transition: all 0.2s;
    }


    /* More distinct operator buttons */
    .ops-wrap button[data-op="+"] {
      background: #4fc3f7;
      color: white;
      font-size: 28px; /* Extra large plus */
    }
    
    .ops-wrap button[data-op="-"] {
      background: #4fc3f7;
      color: white;
      font-size: 32px; /* Extra large minus */
      padding-top: 4px; /* Better alignment */
    }
    
    .ops-wrap button[data-op="*"] {
      background: #66bb6a;
      color: white;
      font-size: 28px; /* Larger multiplication */
    }
    
    /* new*/
  /* Updated operator panel styles */
  .ops-wrap button[data-op="/"] {
    background: #66bb6a;
    color: white;
    font-size: 28px;
    position: relative;
    padding-bottom: 8px; /* Better vertical alignment */
  }

  /* More natural division symbol */
  .ops-wrap button[data-op="/"]::before {
    content: "รท";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  /* Hide the original slash */
  .ops-wrap button[data-op="/"] span {
    visibility: hidden;
  }

    
    .ops-wrap button[data-op="^"] {
      background: #ffa726;
      color: white;
      font-size: 20px;
      padding-bottom: 8px; /* Better alignment */
    }
    
    .ops-wrap button[data-op="("],
    .ops-wrap button[data-op=")"] {
      background: #ba68c8;
      color: white;
      font-size: 24px;
    }

    /* Answer panel moved up */
    .answer-container{
      position:relative;
      margin:8px 0 16px;
      width:100%;
    }
    .answer-box{
      width:100%;
      padding:12px 40px 12px 12px;
      font-size:1.05rem;
      border:2px solid #ddd;
      border-radius:10px;
      box-sizing:border-box;
    }
    .answer-feedback{
      position:absolute;
      right:10px;
      top:50%;
      transform:translateY(-50%);
      font-size:1.4rem
    }
    .success-icon{color:var(--success)} 
    .error-icon{color:var(--error)}

    /* Button rows */
    .button-row {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin: 10px 0;
      width: 100%;
      flex-wrap: wrap;
    }
    
    button{
      padding: 10px 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      min-width: 80px;
    }
    .primary-btn{background:var(--brand);color:white}
    .success-btn{background:var(--success);color:white}
    .info-btn{background:var(--info);color:white}
    .warning-btn{background:var(--warning);color:black}
    .danger-btn{background:var(--error);color:white}
    .secondary-btn{background:#78909c;color:white}
    .clear-btn{background:var(--warning);color:black} /* Yellow clear button */

    /* Solutions + messages + stats */
    #solutionPanel{
      display:none;
      background:#fff7ed;
      border-radius:10px;
      padding:10px;
      margin-top:10px;
      width:100%;
    }
    .solution-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:6px;
      margin-top:8px
    }
    .status.status-success {
      color: var(--success);
    }
    .status.status-error {
      color: var(--error);
    }
    .status-success {
      color: var(--success); /* or use green directly: #28a745 */
    }
    .status-error {
      color: var(--error);   /* or use red directly: #d00 */
    }
    .status {
      text-align: center;
      font-weight: 600;
      min-height: 24px;
      margin: 10px 0;
      color: var(--error); /* uses red defined in root */
    }
    .stats{
      display:flex;
      justify-content:center;
      gap:14px;
      flex-wrap:wrap;
      color:#777;
      font-size:.95rem;
      margin-top:12px;
      width:100%;
    }
    .stats span{min-width:100px;display:inline-block}

    @media (max-width:720px){
      :root{
        --board-max: 94vw;
        --card-h: 160px;
        --card-w: calc(var(--board-max)/2 - 16px);
        --op-btn-h: 48px;
      }
      .cards{
        grid-template-columns:repeat(2, 1fr)
      }
      .button-row{
        gap: 6px;
      }
      button{
        padding: 8px 10px;
        font-size: 14px;
        min-width: 70px;
      }
      .ops-wrap button {
        font-size: 20px;
        padding: 0 10px;
      }
      .ops-wrap button[data-op="+"] {
        font-size: 24px;
      }
      .ops-wrap button[data-op="-"] {
        font-size: 28px;
      }
    }
    /* Tab Styles */
.tabs {
  display: flex;
  gap: 8px;
  border-bottom: 2px solid #0ea5e9;
  margin-bottom: 16px;
}

.tab-link {
  padding: 8px 16px;
  background: none;
  border: none;
  cursor: pointer;
  font-weight: 600;
  color: #666;
  border-bottom: 3px solid transparent;
}

.tab-link.active {
  color: #0ea5e9;
  border-bottom-color: #0ea5e9;
}

.tab-link:hover {
  color: #0ea5e9;
}

.tab-content {
  display: none;
  line-height: 1.6;
}

.tab-content.active {
  display: block;
}
/* Modal Backdrop - FIXED POSITIONING */
.modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.65); /* Darker backdrop for better contrast */
  display: none; /* Hidden by default */
  align-items: center;
  justify-content: center;
  z-index: 10000; /* Extremely high to ensure it's on top */
}

/* Modal Box - CENTERED AND VISIBLE */
.modal {
  background: #fff;
  max-width: 90vw; /* More responsive */
  width: 650px; /* Good width for content */
  max-height: 80vh; /* Don't exceed viewport height */
  overflow-y: auto; /* Add scroll if content is too tall */
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
  z-index: 10001; /* Even higher than backdrop */
}

/* Ensure modal is visible when displayed */
.modal-backdrop[style*="display: flex"] {
  display: flex !important;
}
/* Animation for modal */
.modal-backdrop {
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
}

.modal-backdrop[style*="display: flex"] {
  opacity: 1;
}

.modal {
  transform: translateY(-20px);
  transition: transform 0.2s ease-in-out;
}

.modal-backdrop[style*="display: flex"] .modal {
  transform: translateY(0);
}
